machine:
  java:
    version: oraclejdk8

checkout:
  post:
    - chmod u+x gradlew

dependencies:
  post:
    - ./bin/fakes3 -r . -p 12345:
        pwd:
          fake-s3/
        background: true

general:
  artifacts:
    - "build/reports/tests/index.html"
    - "build/reports/tests/classes/pl.codewise.amazon.client.AsyncS3ClientTest.html"

deployment:
  production:
    branch: /.*?/
    commands:
      - chmod u+x gradlew
      - ./gradlew release
